<h1>Dog Whistle ðŸ”Š</h1>
<div class="whistle-container">

    <label for="freq">Frequency: {{ frequency }} Hz</label>
    <input type="range" id="freq" min="15000" max="22000" step="100" [(ngModel)]="frequency"
        (input)="updateFrequency()" />
    <button class="whistle-btn play" (click)="playSound()" [disabled]="isPlaying">Play</button>
    <button class="whistle-btn stop" (click)="stopSound()" [disabled]="!isPlaying">Stop</button>
    <button class="whistle-btn test" (click)="testSound()">Test</button>
    <div class="whistle-status">
        <span *ngIf="isPlaying" class="playing">Playing...</span>
        <span *ngIf="!isPlaying" class="stopped">Stopped</span>
    </div>
</div>

<div class="morse-card">
    <h3>Morse Player</h3>

    <label>Text to send:</label>
    <textarea [(ngModel)]="inputText" rows="2"></textarea>

    <div class="row">
        <label>WPM: {{wpm}}</label>
        <input type="range" min="5" max="40" step="1" [(ngModel)]="wpm" />
    </div>

    <div class="row">
        <label>Frequency: {{frequency}} Hz</label>
        <input type="range" id="freq" min="15000" max="22000" step="100" [(ngModel)]="frequency"
            (input)="updateFrequency()" />
        <small *ngIf="frequency>20000" class="warn">âš  Frequency &gt; 20kHz â€” many speakers can't reproduce this.</small>
    </div>

    <div class="controls">
        <button (click)="playMorse()" [disabled]="playing">Play</button>
        <button (click)="stopMorse()" [disabled]="!playing">Stop</button>
        <button (click)="testPulse()">Test 2s</button>
        <button (click)="exportLogCsv()">Export log</button>
    </div>

    <div class="led">
        <div class="led-indicator" [class.on]="playing"></div>
        <div class="status">Status: {{ playing ? 'Playing' : 'Idle' }}</div>
    </div>

    <div class="logbox">
        <h4>Log</h4>
        <div *ngFor="let l of log">{{l.time}} â€” {{l.evt}}</div>
    </div>
</div>