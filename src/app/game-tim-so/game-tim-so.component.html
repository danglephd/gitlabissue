<div class="container header-container">
    <div class="heading header-flex">
        <h1 class="title header-title">
            <span class="menu-icon" (click)="toggleNav()">&#9776;</span>
            Number
        </h1>
        <div class="header-actions-group">
            <div class="scores-container">
                <div class="score-container">{{(gameState$ | async)?.currentNumber ?? 1}}</div>
                <div class="best-container">{{((gameState$ | async)?.timeLeft ?? 0) | formatTime}}</div>
            </div>
            <a class="restart-button" (click)="startGame()">New Game</a>
        </div>
    </div>
</div>
<div #sidenav class="sidenav">
    <div class="sidenav-header">
        <a href="javascript:void(0)" class="closebtn" (click)="closeNav()">&times;</a>
        <span class="sidenav-title" (click)="closeNav()" style="cursor:pointer;">Settings</span>
    </div>
    <div class="sidenav-content" [formGroup]="settingsForm">
        <label for="numbLength">Number of Numbers</label>
        <div class="desc">Total numbers to find in the game.</div>
        <input type="number" id="numbLength" formControlName="numbLength">

        <label for="zoomBoard">Zoom</label>
        <div class="desc">Adjusts the overall scale of the board.</div>
        <input type="number" id="zoomBoard" formControlName="zoomBoard">

        <label for="cR">Circle Radius (R)</label>
        <div class="desc">Radius of each number circle (in pixels).</div>
        <input type="number" id="cR" formControlName="cR" (input)="onRadiusChange($event)">

        <label for="fontSize">Font Size</label>
        <div class="desc">Size of the number text inside each circle.</div>
        <input type="number" id="fontSize" formControlName="fontSize">

        <label for="deltaTop">Delta Top</label>
        <div class="desc">Vertical offset for the board (in pixels).</div>
        <input type="number" id="deltaTop" formControlName="deltaTop">

        <a class="restart-button" style="margin: 10px 0;" (click)="startGame()">New Game</a>
    </div>
</div>
<canvas #gameCanvas></canvas>
<div id="gameZone">
    <div *ngFor="let item of gameZoneItems"
         class="numberCircle"
         [class.hidden]="item.isHidden"
         [style.background-color]="item.backgroundColor"
         [style.top]="item.top"
         [style.left]="item.left"
         [style.width]="item.width"
         [style.height]="item.height"
         [style.line-height]="item.lineHeight"
         [style.font-size]="item.fontSize"
         [style.color]="item.color"
         (click)="onNumberClick(item)">
        {{item.value}}
    </div>
</div>
<div class="game-over" *ngIf="(gameState$ | async)?.isGameOver">
    <p id="final_timer">{{finalTimer}}</p>
    <p>Finish!</p>
    <div class="lower">
        <a class="keep-playing-button" (click)="closeFinish()">Keep going</a>
        <a class="retry-button" (click)="startGame()">Play again</a>
    </div>
</div>